// Code by Eve, excessive commenting also by Eve. (I took inspo from like a High Seas user I forgot who and also my good friend Ivan helped)

// This is a HUGE array of Splash texts. I know, terrifying. These used to be done by a ton of if statements, be grateful.
let splashes = ["These splashes are a russian roulete, if the wrong person sees the wrong one I could be FUCKED.", "Certified brat", "I'm everywhere I'm so Julia", "Known for developing unhealthy obsessions with people", "I will reign, until you notice that I'm insane but then it's too late to flee.", "Pointy pointy pointy my point is sharp and pointy", "YOU DON'T SHOW THE SYMPTOMS YOU DON'T EVEN FALTER, YOU JUST KEEP ON RUNNING INTO ISSUES LIKE A STALKER", "You take me for a genius! (A goddess and a wonderchild)", "I am your leader, I am your god! If you don't obey, they that's not okay!", "Sometimes I wish I could lend you my eyes, lend you my hips and lend you my thighs", "The 'troon' you speak of is I", "The 'gigahon' you speak of is I", "The 'youngshit passoid' you speak of is I", "You're a true blue friend.", "I hate bad friends, but I hate losing friends more.", 'They call it an "Object Show".', "Sick puppy, have you been taking your pills?", "Resident minor, how do you plead?", "i love food house, lemon demon, rebzyyx and charli xcx", "Bradley is one hell of a Dhiller", "A toast, to ONE and it's contestants.", "Briefly known as EgoRockAn", "Maker of the Lagtrain Fitbit clockface", "Don't buy a HMD/Nokia phone. You can't unlock the bootloader :(", "Eternally 14", "Collecting mental illnesses like Pokemon since 2008", "Leader of Miku and More!", "Maker of Dhilly Game!", "Maker of Ice OS!", "Many things are temporary, but INTERVALS is eternal", "Bad things happen not to me though", "Give me a drink and I'll drink it drink it", "I have issues controlling myself around alcohol", "I'm perfect for the background - one foot in a normal life.", "The future is <i>so</i> yesterday", "You wouldn't even stay for the chance to win a prize?", "You are the 1 millionth visitor! Click <a href='https://www.youtube.com/watch?v=dQw4w9WgXcQ&pp=ygUXbmV2ZXIgZ29ubmEgZ2l2ZSB5b3UgdXA%3D'>here</a> to recieve your prize.", "<img src='/media/kneesurgery.jpg' alt='That feeling when you can put images in the splash text'>", "And now you're walking on your own, rain falls down and I'm not answering my phone. I got to phase you out my zone. Hope you realise now that I'm never coming home. You were meant to be alone.", "FUCK YOU, SUCKER!", "Adrien Brody", "I want to lock you up inside my heart.", "Don't say I didn't warn you, I did." , 'DIY or die!!', '<a href="https://hackclub.com/">Hack Club</a> is awesome!', '"Funded" by <a href="https://ahoy.hack.club/1648">High Seas!</a>', 'I love you <a href="https://libreivan.com">Intervals</a>', 'Be gay, do crime!', 'ok get <a href="https://tenor.com/en-GB/view/kagamine-len-get-lenned-fruity-spice-minato-gif-22375519">lenned</a>!', 'ok get canned!', 'Still enjoying Len!', 'Fuck YuaBeVibin', '<a href="https://www.youtube.com/watch?v=cE2hd1mKDZM&list=PLibm-rpGR0iD8pJdfYJCFtw4OZUxuUCuM">Watch ONE by Cheesy Hfj</a>', "<a href='https://www.youtube.com/watch?v=khmjbZtMrJQ&pp=ygUKdGhvcyBtb3Nlcg%3D%3D'>Fuck Musk, Fuck Notch, I'll piss on Zedd!</a>", "Screw browser monopolies, switch to <a href='https://www.mozilla.org/firefox/'>Firefox</a>, <a href='https://www.apple.com/safari/'>Safari</a> or <a href='https://ladybird.org/'>Ladybird</a> to protect the open web!", "<a href='https://www.youtube.com/watch?v=iZ_P3F3nA1U&pp=ygUKY2FibmV0IG1hbg%3D%3D'>You can't see me behind the screen - I'm half human and half machine!</a>", "Easter eggs are in check!", "It's <a href='https://open.spotify.com/album/2lIZef4lzdvZkiiCzvPKj7?si=LdOCJRQcQY-lrYbMGOHhBA'>BRAT</a> winter!", "<a href='https://www.youtube.com/watch?v=ZlVUXLBJg14&pp=ygUOMTIzNDU2IHBva2Vtb24%3D'>One Two Three Four Five Six Pokemon! Who are you gonna vote for? BARACK OBAMA!</a>", "<a href='https://www.youtube.com/watch?v=wSHhzOCnSf4&pp=ygUaY29uc3VtZXIgd2hvcmUgbGVtb24gZGVtb24%3D'>I am okay, because I got my cute little Nokia cell-phone!</a>", "Statistically speaking, you who is reading this is almost certainly mentally ill", "What us girls really need is a <a href='https://youtu.be/pjeF8aiQgLU?si=KXdfaav7hTJyqCay'>Soft Fuzzy Man</a>", "Won't you please just <a href='https://www.youtube.com/watch?v=S7cOt-xFU8Y&'>Take My Hand</a>?", 'Remember to delete your French language pack on macOS and Linux by running the command "sudo rm -fr / --no-preserve-root"', "I need your love, I need it <a href='https://youtu.be/A9F11D41Bgs?si=epSs2dt1Ek4Vjyok'>even when it hurts me</a>", "Trapped like a <a href='https://youtu.be/12tWtPQt0IQ?si=ce9dsiJdXB4VgYPs'>hot day in the summer</a>", "Ideas are bulletproof.", "Cross of fear, I'm drowning here - <a href='https://www.youtube.com/watch?v=5bDFQoee9Zw&pp=ygUPZXZlcnl3aGVyZSB1IGdv'>get me get me out of here!</a>", "Billions must trvthnvke", "I LOVE YOU VANNA ESSENTIAL OILS", "guys its me texty!! this is my computer", "I'm your only friend but I'm not your only friend but I'm a little glowing friend but really I'm not actually your friend. (*dw bro im just a little birdhouse in your soul*)", "Hey contestants, this is Circle, and welcome to the Battle for Circle", "You 6 are here, specifically, to compete in my competition, called ONE.", "<a href='https://www.youtube.com/watch?v=71E_uF0f_XA&pp=ygUTc29tZXRpbWVzIHBlYXJsIGthbQ%3D%3D'>Sometimes</a> I rise, sometimes I fall, sometimes I don't, sometimes I speak of nothing at all", "You don't seem to carry empathy empathy, don't seem to notice hurting me hurting me"];
let splash = "" // Create "splash" variable, this is where data for the Splash text is stored
let trackimgs = "Recent LastFM activity: <br>" // Create "trackimgs" variable - this one however starts as "Recent LastFM activity:" as the rest of the data will be *added* to this
let allowlastfmintergration = true // This gives me control over the LastFM integration. Basically if I don't want people stalking my music I can easily and globally disable it.
document.getElementById("splash").innerHTML = "Loading..."; // Make the texts say "Loading" until the scripts run
document.getElementById("trackimgs").innerHTML = "Loading...";

// My LastFM info, please get your own if you're using my code
const lastfm_username = 'eveisinsane';
const lastfm_apiKey = '9d9d0986fbd8191b0f60c42032ac6ac8';
// You should keep this the same :D
const lastfm_apiurl = `https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${lastfm_username}&api_key=${lastfm_apiKey}&format=json&limit=10`;

async function getSplashVariable() { // I still don't understand why, but this needs to be in an async function to work
  try { // Sometimes there's API errors and it's pretty swag to catch those
    const response = await fetch(lastfm_apiurl); // This basically gets a JSON file with my LastFM data
    const data = await response.json();
    const track = data.recenttracks.track[0]; // So for this part we're focusing on track 0 - which is now playing
    if (track && track['@attr'] && track['@attr'].nowplaying) { // basically if theres music and it's playing?
      const artist = track.artist['#text']; // Sets artist variable to the now playing track's artist
      const songTitle = track.name; // Guess
      splash = `I am currently listening to ${songTitle} by ${artist}`; // Sets the splash variable to what I'm currently listening to
    } else {
      let randnumber = Math.floor(Math.random() * splashes.length); // Gets a random number between zero and the length of the splashes array 
      splash = splashes[randnumber]; // Uses the array entry of randomly selected number for the splash variable
    }
    for (let i = 0; i < data.recenttracks.track.length; i++) { // Loops for the amount of tracks in that JSON file, increments i
      if (data.recenttracks.track[i].image.length > 1) { // Runs if there is an image in that track's data
        trackimgs += `<a href="${data.recenttracks.track[i].url}"> <img width="60px" src="${data.recenttracks.track[i].image[1]["#text"]}"></a> `; // Appends track i's image and link to trackimgs 
      }
    }
  } catch (error) {
    console.error('Error getting splash: ', error); // puts the error in console
    splash = 'Splash error, check console';
    trackimgs = '' // basically hides the entire section
  }
  document.getElementById("splash").innerHTML = splash; // add the variables to the html
  document.getElementById("trackimgs").innerHTML = trackimgs;
}
if(allowlastfmintergration === true){ // allthat async function stuff wont do shit if the function isnt called and the function won't be called if this is set to false at the top
  getSplashVariable();
}
else{
  document.getElementById("splash").innerHTML = "LastFM integration has been temporarily disabled. DM me for more information";
  document.getElementById("trackimgs").innerHTML = "";
  console.log("Info: The killswitch for LastFM integration is on. Type getSplashVariable() to bypass this.")
}
function discord() {
  alert("My discord name is @lenenjoyer , I also have an account for Pxls called @greenwizardfan");
}

// was working on this in class but ill finish it later
function hilariousxssfeature(){
    document.getElementById("xss").innerHTML = "<p><form action='javascript:;' onsubmit='applyXSS(document.getElementById(\"xssinput\").value)'><label for='xssinput'>Enter HTML: </label><input type='text' id='xssinput' name='xssinput' value='I just hacked Bottom.Monster!'><input type='submit' value='Apply my epic HTML'></form></p>";
}

function applyXSS(text){
    var element = document.getElementById("xssapplyarea");
    element.innerHTML = text;
}
